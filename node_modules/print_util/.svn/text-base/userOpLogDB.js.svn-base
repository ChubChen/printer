var mongoDBUtil = require("./MongoDBUtil.js");

function UserOpLog(userOp){
	this.created = userOp.created;
	this.userName = userOp.userName;
	this.operateDes = userOp.operateDes;
}

UserOpLog.prototype.save = function(cb){
	var userOp = {
		created: this.created,
		userName: this.userName,
		operateDes: this.operateDes
	};

	mongoDBUtil.db.collection('userOpLog', function(err,collection){
		if(err){
			cb(err);
		}else{
			collection.ensureIndex({'userName':1});
			collection.insert(userOp, {safe:true}, function(err,doc){
				cb(err,doc);
			});
		}
	});
};

module.exports = UserOpLog;